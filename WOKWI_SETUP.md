# Настройка проекта для Wokwi

Этот проект использует LCD1602 через I2C для отображения данных из Home Assistant.

## Конфигурация Wokwi

Проект настроен для работы в Wokwi через два файла:
- `wokwi.toml` - конфигурация симуляции (пути к прошивке, WiFi настройки)
- `diagram.json` - схема подключения компонентов

## Подключение в Wokwi

### Схема подключения:

- **ESP32 GPIO21 (SDA)** → **LCD1602 SDA**
- **ESP32 GPIO22 (SCL)** → **LCD1602 SCL**
- **ESP32 3V3** → **LCD1602 VCC**
- **ESP32 GND** → **LCD1602 GND**

### I2C адрес LCD1602

По умолчанию используется адрес `0x27`. Если дисплей не работает, попробуй изменить в `src/main.cpp`:

```cpp
#define LCD_I2C_ADDR 0x3F  // Попробуй этот адрес
```

## Настройка перед запуском

1. Открой `src/main.cpp`
2. Настрой WiFi:
   - `WIFI_SSID` - название твоей WiFi сети
   - `WIFI_PASSWORD` - пароль от WiFi

3. Настрой Home Assistant:
   - `HA_SERVER` - IP адрес Home Assistant
   - `HA_PORT` - порт (обычно 8123)
   - `HA_TOKEN` - Long-Lived Access Token
   - `HA_ENTITY_ID` - Entity ID сенсора мощности

## Запуск в Wokwi

1. Открой проект в Wokwi
2. Нажми "Start Simulation"
3. В консоли увидишь логи подключения к WiFi и запросы к Home Assistant
4. На LCD1602 будет отображаться мощность в ваттах

## Что отображается на LCD

- **Первая строка:** "Power: XXX.X W" - текущая мощность
- **Вторая строка:** Статус подключения к Home Assistant

## Возможные проблемы

1. **LCD не инициализируется:**
   - Проверь I2C адрес (попробуй 0x3F вместо 0x27)
   - Проверь подключение SDA/SCL

2. **WiFi не подключается:**
   - В Wokwi WiFi работает автоматически, но проверь настройки в коде

3. **Не получает данные из HA:**
   - Проверь IP адрес, порт и токен
   - Проверь Entity ID сенсора

